<template>
  <!--  假文 by http://more.handlino.com/-->
  <div class="page-index">
    <div style="height: 100vh; position: relative; z-index: 0">
      <div id="sectionHero" class="my-row fvh fcenter section--hero">
        <div class="container">
          <h1>00. Hello World</h1>
          <p>他，在學期末之後，架構了一個網站寫好原始碼之後過來打分數，看似完美，在學期末之後，但從頭到尾那些網頁也不是他自己寫的</p>
        </div>
      </div>
    </div>

    <div id="section01" class="my-row fvh bg-grey section--01">
      <div class="block block1"></div>
      <div class="block block2"></div>

      <div class="container">
        <h1>01. 還不賴，還不賴，還不賴？</h1>
        <p class="para">
          還不賴，還不賴，還不賴，還不賴，還不賴，還不賴，還不賴，還不賴，還不賴，還不賴，還不賴，還不賴，還不賴，還不賴，還不賴，還不賴，還不賴，還不賴，還不賴，還不賴，還不賴，還不賴，還不賴，還不賴，還不賴，還不賴，還不賴，還不賴，還不賴，還不賴，還不賴，還不賴，還不賴，還不賴？我們多長一歲年紀往往只是加重我們頭上的枷，同時她們講你生前的故事，留下在我們心頭的只是些揶揄的鬼影；我們在這道上偶爾停步迴想的時候，耳不塞，扮一個漁翁，圓滿這全程的寂寞，雪西裡與普陀山，你才知道靈魂的愉快是怎樣的，單是活著的快樂是怎樣的，身影似的不可解脫。</p>
      </div>
    </div>

    <div class="my-row section--02">
      <div class="container">
        <h1>02. 看似完美，…</h1>
        <p>
          嚷嚷要一起死，力挺反對派，微軟釋出12分鐘Xbox，送樹苗造樹海，兩會來臨，送樹苗造樹海，西伯利亞大地震，豐濱落海失蹤男童，Doodle，景女拔河隊，宿舍門禁卡壞，彈奏翻譜目不轉睛，賈欣惠400萬婚宴，菊分身乏術，LG，總統二度召開國安會議，陸房市交易量暴跌，警察杯杯辛苦啦！嗯，染料恐致癌，潮爽德，染料恐致癌，這起地震是板塊碰撞擠壓所致，任何議題問名嘴，的行為，軍方也暫停戰機起降與實彈射擊...【短片】30年最強無敵魔鬼颱，當絕大多數國家主人主張停建核四，吃東西不小心不行啊...金氏紀錄整形最多，這起地震是板塊碰撞擠壓所致，我也想一次看8部影片喲！太空船被我弄壞了，嚇死人了，還算可以，需要協助的話，結果，突然來找你，拜拜，別走，要試試看嗎，不管是藥學，不論地球或我等，去溫泉耶，遣送回K隆星是也，那麼現在，先這樣吧，第5名，牧師一號，超讚的鏡頭，說真的！日新創服務每月代送親人相片，力挺反對派，山里隧道貫通，小學生遜大陸，兩岸/臺北兩岸和平發展論壇：鞏固九二共識，《稅收》夫妻懲罰稅修法沒過，台灣最新英語能力表現報告！請他的交通大學資訊工程系朋友幫忙他，在學期末之後，架構了一個網站寫好原始碼之後過來打分數，看似完美，在學期末之後，但從頭到尾那些網頁也不是他自己寫的，…要在新加坡和香港取得永久居留權容易很多，但同時，晚餐時，就像台灣政治永遠不會真的改進，他的中文說得不好，然後說你很誠實，如果他愛我，我一個商學院的朋友打給我，而他想幫我介紹一下，混合這些，或許整個世界根本沒有感覺，以及進入最穩定大公司當工程師的機會？</p>
      </div>
    </div>

    <div class="my-row fvh fcenter bg-grey section--03">
      <div class="container">
        <h1>03. 生，沒有錢，早起的蟲蟲被鳥吃。</h1>
        <p>
          他那資質的敏慧，這次我再來歐洲你已經早一個星期回去，誰不曾擁著半夜的孤衾飲泣？別人可以拷貝我的模式，誠信絕對不是一種銷售，記住，創業時期千萬不要找明星團隊，一個一流的創意，蒙牛不是策劃出來的，領導力在順境的時候，…舍，身量雖然較高，所有無謂的損失，不知是兄哥或小弟，他說人們是在發狂，在我的知識程度裡，就一味地吶喊著，因為空間的黑暗，我們是在空地上，到大街上玩去罷，都很讚成，孩子們得到指示，原無有確實的根據標準，十五年前的熱鬧，似皆出門去了，丙驚疑地問，他叩了不少下頭，誰敢說是起於一時？他另外兩位合夥人是美國人，舉辦年度世界會議，去考試，因為他們的書實在太重了！還不賴，還不賴，還不賴，還不賴，還不賴，還不賴，還不賴，還不賴，還不賴，還不賴，還不賴，還不賴，還不賴？就要找一群人去寫，現在颱風帶來的風，如果九二一發生在台北市，但並不編列特別預算，可是這裡面很多都無關，還要求發卡公司要寄送帳單，以後不會有哪一個政黨、哪一位委員、或哪一個政府部門，這都不是事實，還是將來要用另外一套系統，不會去考慮調漲香菸的價錢以做為來源。</p>
      </div>
    </div>
  </div>
</template>

<script>
  if (process.client) {
    // 引入GSAP
    var {TweenMax, TimelineMax} = require('gsap')

    // 引入ScrollMagic
    var ScrollMagic = require('scrollmagic')
    // 使用imports-loader解决webpack神坑
    // https://www.reddit.com/r/Frontend/comments/4dshb8/new_to_webpack_problem_using_scrollmagic_gsap/
    require('imports-loader?define=>false!scrollmagic/scrollmagic/minified/plugins/animation.gsap.min')
    require('imports-loader?define=>false!scrollmagic/scrollmagic/minified/plugins/debug.addIndicators.min')
  }

  export default {
    mounted() {
      if (process.client) {
        this.$nextTick(() => {

          this.initScrollMagic()

        })
      }
    },

    methods: {
      // 初始化所有滚动动画
      initScrollMagic() {
        this.scrController = new ScrollMagic.Controller()
        console.log('创建 ScrollMagic 控制器', this.scrController)

        // sectionHero
        ;(() => (
          new ScrollMagic.Scene({
            triggerElement: '#sectionHero',
            duration: '100%',
            triggerHook: 0
          }).setPin('#sectionHero')
            .setTween('#sectionHero .container', {

              y: '-300%',
              scale: 0.8,
              color: '#f0f'
            })
            .addIndicators({name: '#sectionHero'})
            .addTo(this.scrController)
        ))()

        // section01
        ;(() => {

          // 一些随意的动画
          let h1Selector = '#section01 h1'
          let tlH1 = new TimelineMax()
            .from(h1Selector, 10, {
              scale: 0,
              transformOrigin: 'left',
              autoAlpha: 0,
              color: 'blue',
              rotation﻿: -180
            })
            .to(h1Selector, 1, {
              color: 'red',
              transformOrigin: 'left',
              scale: '1.5'
            })
          let tlP = new TimelineMax()
            .from('#section01 p', 30, {
              autoAlpha: 0,
              delay: 10
            })
          let timeline1 = new TimelineMax().add([tlH1, tlP])


          new ScrollMagic.Scene({
            triggerElement: '#section01',
            duration: '35%',
          }).setPin(h1Selector)
            .setTween(timeline1)
            .addIndicators({name: '#section01'})
            .addTo(this.scrController)


          let b1Selector = '#section01 .block1'
          let tlBlock1 = new TimelineMax()
            .to(b1Selector, 1, {
              left: '95%',
              ease: Bounce.easeIn
              // repeat: 2,
              // yoyo: true
            })
          let b2Selector = '#section01 .block2'
          let tlBlock2 = new TimelineMax()
            .to(b2Selector, 1, {
              right: '95%',
              ease: Bounce.easeOut
            })


          let timeline2 = new TimelineMax().add([tlBlock1, tlBlock2])


          new ScrollMagic.Scene({
            triggerElement: '#section01',
            duration: '100%',
          })
            .setTween(timeline2)
            .addIndicators({name: '#section01 2'})
            .addTo(this.scrController)

        })()

      }

    },

    beforeDestroy() {
      // 销毁ScrollMagic
      if (this.scrController) {
        this.scrController.destroy(true)
        console.log('销毁 ScrollMagic 控制器', this.scrController)
      }

    }
  }
</script>

<style lang="stylus">
  .page-index
    .my-row
      padding 50px 10px
      box-sizing border-box
      line-height: 1.5
      position: relative

      .block
        position: absolute
        width 50px
        height 50px
        background magenta

      &.bg-grey
        background $shallow_grey

      &.fcenter
        display flex
        align-items center

      &.fvh
        height 100vh

      .container
        max-width 600px
        margin 0 auto

        h1
          font-size 30px
          margin 20px 0
          font-weight: bold
          @media Phone
            margin 10px 0
            font-size 18px

        p
          font-size 16px
          @media Phone
            font-size 12px

      &.section--hero
        h1
          font-size 50px
          @media Phone
            font-size 20px

        p
          font-size 20px
          @media Phone
            font-size 14px

      &.section--01
        position: relative
        z-index 1

        .block1
          top 40%
          left 0
          background salmon

        .block2
          top 50%
          right 0
          background cadetblue

  .__tmp
    display none
</style>
